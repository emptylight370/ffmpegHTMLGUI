// define translations, based on the sequences in the document, `json` format
var translations = {
    "en": {
        "language_select": "Language select",
        "general": {
            "language_choose": "Language:",
            "upload_label": "You can click to upload and select a file, and copy the file address. This does not actually work here:",
            "file_path_label": "Here is the path of the file you selected. Right-click the file when uploading and select Copy file address, and paste the address into the right text box:",
            "preset_label": "no need to fill in the settings, one-click export",
            "output_dir_label": "Output video folder:",
            "output_filename_label": "Output video name:",
        },
        "title": {
            "websocket_label": "websocket settings",
            "preset_title": "Preset options",
            "ffmpeg_settings_title": "Here are the FFmpeg settings:",
            "general_settings_title": "General settings",
            "video_settings_title": "Video settings",
            "audio_settings_title": "Audio settings",
            "special_settings_label": "Special options",
            "output_command_title": "Output command",
        },
        "tip": {
            "warning001": "This item is required",
            "tip001": "You need to fill in the available folder address, please end with '\\'",
            "tip002": "Even if you only modify the suffix, you need to fill in the complete file name, including the suffix here",
        },
        "video": {
            "video_resolution_label": "Video resolution:",
            "video_bitrate_label": "Video bitrate:",
            "video_fps_label": "Video FPS:",
            "video_present_label": "Output video quality",
            "video_decoder_label": "Select video decoder",
        },
        "audio": {
            "audio_decoder_label": "Select audio decoder",
        },
        "special": {
            "hide_message_label": "Brief information",
            "force_overwrite_label": "Force overwrite output file",
            "show_encoding_status_label": "Show encoding progress",
            "no_video_out_label": "No video output:",
            "no_audio_out_label": "No audio output:",
            "output_command_label": "The generated parameter command is as follows:",
        },
        "button": {
            "video_present_unselect": "Unselected",
            "start_websocket_button": "Start websocket",
            "dis_01_button": "[Expand]",
            "dis_02_button": "[Collapse]",
            "video_decoder_unselect": "Unselected",
            "audio_decoder_unselect": "Unselected",
            "chose_to_hide_message_label": "Click to enable, only display metadata",
            "chose_to_overwrite_label": "Click to enable",
            "chose_to_show_encoding_status_label": "Click to enable",
            "chose_to_no_video_out": "Click to enable",
            "chose_to_no_audio_out": "Click to enable",
            "show_support_codec_button": "View supported encoders",
            "generate_button": "Click to generate",
            "copy_button": "Click to copy",
            "run_button": "Click to run",
        },
    },
    "zh-CN": {
        "language_select": "语言选择",
        "general": {
            "language_choose": "语言选择：",
            "upload_label": "你可以点击上传选择文件，并复制文件地址，这里实际上不起作用：",
            "file_path_label": "这里是你选择的文件的路径，请在上传文件时右键文件选择复制文件地址，并将地址粘贴到右边文本框中：",
            "preset_label": "无需填写设置，一键导出",
            "output_dir_label": "输出视频文件夹：",
            "output_filename_label": "输出视频名称：",
        },
        "title": {
            "websocket_label": "websocket设置",
            "preset_title": "预设选项",
            "ffmpeg_settings_title": "以下是FFmpeg的参数设置：",
            "general_settings_title": "一般设置",
            "video_settings_title": "视频设置",
            "audio_settings_title": "音频设置",
            "special_settings_label": "特殊选项",
            "output_command_title": "输出命令",
        },
        "tip": {
            "warning001": "此项必填",
            "tip001": "需要填写可用的文件夹地址，请以'\\'结尾",
            "tip002": "只修改后缀名也要填写完整文件名，这里的文件名包括后缀名",
        },
        "video": {
            "video_resolution_label": "视频分辨率：",
            "video_bitrate_label": "视频比特率：",
            "video_fps_label": "视频帧数：",
            "video_present_label": "输出的视频质量",
            "video_decoder_label": "选择视频解码器",
        },
        "audio": {
            "audio_decoder_label": "选择音频解码器",
        },
        "special": {
            "hide_message_label": "简略信息",
            "force_overwrite_label": "强制覆盖输出文件",
            "show_encoding_status_label": "显示编码进度",
            "no_video_out_label": "不输出视频：",
            "no_audio_out_label": "不输出音频：",
            "output_command_label": "生成的参数命令如下：",
        },
        "button": {
            "start_websocket_button": "启动websocket",
            "dis_01_button": "[展开]",
            "dis_02_button": "[收起]",
            "video_present_unselect": "未选择",
            "video_decoder_unselect": "未选择",
            "audio_decoder_unselect": "未选择",
            "chose_to_hide_message_label": "点击启用，只显示元信息",
            "chose_to_overwrite_label": "点击启用",
            "chose_to_show_encoding_status_label": "点击启用",
            "chose_to_no_video_out": "点击启用",
            "chose_to_no_audio_out": "点击启用",
            "show_support_codec_button": "查看支持的编码器",
            "generate_button": "点击生成",
            "copy_button": "点击复制",
            "run_button": "点击运行",
        },
    },
    "zh-TW":
    {
        "language_select": "語言選擇",
        "general": {
            "language_choose": "語言選擇：",
            "upload_label": "你可以點擊上傳選擇文件，並複製文件地址，這裏實際上不起作用：",
            "file_path_label": "這裏是你選擇的文件的路徑，請在上傳時右鍵文件選擇複製文件地址，並將地址粘貼到右邊文本框中：",
            "preset_label": "無需填寫設置，一鍵導出",
            "output_dir_label": "輸出視頻文件夾：",
            "output_filename_label": "輸出視頻名稱：",
        },
        "title": {
            "websocket_label": "websocket設置",
            "preset_title": "預設選項",
            "ffmpeg_settings_title": "以下是FFmpeg的參數設置：",
            "general_settings_title": "一般設置",
            "video_settings_title": "視頻設置",
            "audio_settings_title": "音頻設置",
            "special_settings_label": "特殊選項",
            "output_command_title": "輸出命令",
        },
        "tip": {},
        "video": {
            "video_resolution_label": "視頻分辨率：",
            "video_bitrate_label": "視頻比特率：",
            "video_fps_label": "視頻幀數：",
            "video_present_label": "輸出的視頻質量",
            "video_decoder_label": "選擇視頻解碼器",
        },
        "audio": {
            "audio_decoder_label": "選擇音頻解碼器",
        },
        "special": {
            "hide_message_label": "簡略信息",
            "force_overwrite_label": "强制覆蓋輸出文件",
            "show_encoding_status_label": "顯示編碼進度",
            "no_video_out_label": "不輸出視頻：",
            "no_audio_out_label": "不輸出音頻：",
            "output_command_label": "生成的參數命令如下：",
        },
        "button": {
            "start_websocket_button": "啓動websocket",
            "dis_01_button": "[展開]",
            "dis_02_button": "[收起]",
            "video_present_unselect": "未選擇",
            "video_decoder_unselect": "未選擇",
            "audio_decoder_unselect": "未選擇",
            "chose_to_hide_message_label": "點擊啓用，只顯示元信息",
            "chose_to_overwrite_label": "點擊啓用",
            "chose_to_show_encoding_status_label": "點擊啓用",
            "chose_to_no_video_out": "點擊啓用",
            "chose_to_no_audio_out": "點擊啓用",
            "show_support_codec_button": "查看支持的編碼器",
            "generate_button": "點擊生成",
            "copy_button": "點擊複製",
            "run_button": "點擊運行",
        },
    },
    "ja":
    {
        "language_select": "言語選択",
        "general": {
            "language_choose": "言語選択：",
            "upload_label": "ファイルを選択して、ファイルのアドレスをコピーして、ここでは実際には機能しません：",
            "file_path_label": "ここはあなたが選んだファイルのパスです。アップロード時にファイルを右クリックして、ファイルアドレスをコピーし、アドレスを右側のテキストボックスに貼り付けてください：",
            "preset_label": "設定を記入する必要はありません。ワンクリックでエクスポートします",
            "output_dir_label": "出力ビデオフォルダ：",
            "output_filename_label": "出力ビデオ名：",
        },
        "title": {
            "websocket_label": "websocket設定",
            "preset_title": "プリセットオプション",
            "ffmpeg_settings_title": "以下はFFmpegのパラメータ設定です：",
            "general_settings_title": "一般設定",
            "video_settings_title": "ビデオ設定",
            "audio_settings_title": "オーディオ設定",
            "special_settings_label": "特別なオプション",
            "output_command_title": "出力コマンド",
        },
        "tip": {},
        "video": {
            "video_resolution_label": "ビデオ解像度：",
            "video_bitrate_label": "ビデオビットレート：",
            "video_fps_label": "ビデオフレームレート：",
            "video_present_label": "出力ビデオ品質",
            "video_decoder_label": "ビデオデコーダを選択",
        },
        "audio": {
            "audio_decoder_label": "オーディオデコーダを選択",
        },
        "special": {
            "hide_message_label": "簡略メッセージ",
            "force_overwrite_label": "強制的に出力ファイルを上書きする",
            "show_encoding_status_label": "エンコード状態を表示する",
            "no_video_out_label": "ビデオを出力しない：",
            "no_audio_out_label": "オーディオを出力しない：",
            "output_command_label": "生成されたパラメータコマンドは次のとおりです：",
        },
        "button": {
            "start_websocket_button": "websocketを起動する",
            "dis_01_button": "[展開]",
            "dis_02_button": "[収縮]",
            "video_present_unselect": "未選択",
            "video_decoder_unselect": "未選択",
            "audio_decoder_unselect": "未選択",
            "chose_to_hide_message_label": "クリックして有効にする、メタ情報のみを表示する",
            "chose_to_overwrite_label": "クリックして有効にする",
            "chose_to_show_encoding_status_label": "クリックして有効にする",
            "chose_to_no_video_out": "クリックして有効にする",
            "chose_to_no_audio_out": "クリックして有効にする",
            "show_support_codec_button": "サポートされているコーデックを表示する",
            "generate_button": "クリックして生成する",
            "copy_button": "クリックしてコピーする",
            "run_button": "クリックして実行する",
        },
    }
}

// 语言选择
function langsel(lang = null)
{
    // console.log(lang);
    if (!lang)
    {
        // get language chosen
        var lang = document.getElementById("lang").value;
    }
    else
    {
        // if get language from browser doesn't exist
        try
        {
            if (!translations[lang]['language_select'])
            {
                lang = 'en';
            }
        }
        catch
        {
            lang = 'en';
        }
    }
    // console.log(lang);
    // set document language
    document.documentElement.lang = lang;
    console.log(translations[lang]['language_select'] + ":" + lang);

    // set translations
    // if (translations)
    // {

    // general start
    if (translations[lang]['general']['language_choose'])
    {
        document.getElementById("languageChoose").innerHTML = translations[lang]['general']['language_choose'];
    }
    else
    {
        document.getElementById("languageChoose").innerHTML = translations['en']['general']['language_choose'];
    }
    if (translations[lang]['general']['upload_label'])
    {
        document.getElementById('uploadLabel').innerHTML = translations[lang]['general']['upload_label'];
    }
    else
    {
        document.getElementById('uploadLabel').innerHTML = translations['en']['general']['upload_label'];
    }
    if (translations[lang]['general']['file_path_label'])
    {
        document.getElementById('fileSrcLabel').innerHTML = translations[lang]['general']['file_path_label'];
    }
    else
    {
        document.getElementById('fileSrcLabel').innerHTML = translations['en']['general']['file_path_label'];
    }
    if (translations[lang]['general']['preset_label'])
    {
        document.getElementById('presetLabel').innerHTML = translations[lang]['general']['preset_label'];
    }
    else
    {
        document.getElementById('presetLabel').innerHTML = translations['en']['general']['preset_label'];
    }
    if (translations[lang]['general']['output_dir_label'])
    {
        document.getElementById('outputDirLabel').innerHTML = translations[lang]['general']['output_dir_label'];
    }
    else
    {
        document.getElementById('outputDirLabel').innerHTML = translations['en']['general']['output_dir_label'];
    }
    if (translations[lang]['general']['output_filename_label'])
    {
        document.getElementById('outputFileNameLabel').innerHTML = translations[lang]['general']['output_filename_label'];
    }
    else
    {
        document.getElementById('outputFileNameLabel').innerHTML = translations['en']['general']['output_filename_label'];
    }
    // general end
    // title
    if (translations[lang]['title']['websocket_label'])
    {
        document.getElementById("websocketLabel").innerHTML = translations[lang]['title']['websocket_label'];
    }
    else
    {
        document.getElementById("websocketLabel").innerHTML = translations['en']['title']['websocket_label'];
    }
    if (translations[lang]['title']['preset_title'])
    {
        document.getElementById('presetTitle').innerHTML = translations[lang]['title']['preset_title'];
    }
    else
    {
        document.getElementById('presetTitle').innerHTML = translations['en']['title']['preset_title'];
    }
    if (translations[lang]['title']['ffmpeg_settings_title'])
    {
        document.getElementById('ffmpegSettingsTitle').innerHTML = translations[lang]['title']['ffmpeg_settings_title'];
    }
    else
    {
        document.getElementById('ffmpegSettingsTitle').innerHTML = translations['en']['title']['ffmpeg_settings_title'];
    }
    if (translations[lang]['title']['general_settings_title'])
    {
        document.getElementById('generalSettingsTitle').innerHTML = translations[lang]['title']['general_settings_title'];
    }
    else
    {
        document.getElementById('generalSettingsTitle').innerHTML = translations['en']['title']['general_settings_title'];
    }
    if (translations[lang]['title']['video_settings_title'])
    {
        document.getElementById('videoSettingsTitle').innerHTML = translations[lang]['title']['video_settings_title'];
    }
    else
    {
        document.getElementById('videoSettingsTitle').innerHTML = translations['en']['title']['video_settings_title'];
    }
    if (translations[lang]['title']['audio_settings_title'])
    {
        document.getElementById('audioSettingsTitle').innerHTML = translations[lang]['title']['audio_settings_title'];
    }
    else
    {
        document.getElementById('audioSettingsTitle').innerHTML = translations['en']['title']['audio_settings_title'];
    }
    if (translations[lang]['title']['special_settings_label'])
    {
        document.getElementById('specialSettingsLabel').innerHTML = translations[lang]['title']['special_settings_label'];
    }
    else
    {
        document.getElementById('specialSettingsLabel').innerHTML = translations['en']['title']['special_settings_label'];
    }
    if (translations[lang]['title']['output_command_title'])
    {
        document.getElementById('outputCommandTitle').innerHTML = translations[lang]['title']['output_command_title'];
    }
    else
    {
        document.getElementById('outputCommandTitle').innerHTML = translations['en']['title']['output_command_title'];
    }
    // title end
    // tip
    if (translations[lang]['tip']['warning001'])
    {
        document.getElementById('warning001').title = translations[lang]['tip']['warning001'];
    }
    else
    {
        document.getElementById('warning001').title = translations['en']['tip']['warning001'];
    }
    if (translations[lang]['tip']['tip001'])
    {
        document.getElementById('tip001').title = translations[lang]['tip']['tip001'];
    }
    else
    {
        document.getElementById('tip001').title = translations['en']['tip']['tip001'];
    }
    if (translations[lang]['tip']['tip002'])
    {
        document.getElementById('tip002').title = translations[lang]['tip']['tip002'];
    }
    else
    {
        document.getElementById('tip002').title = translations['en']['tip']['tip002'];
    }
    // tip end
    // video
    if (translations[lang]['video']['video_resolution_label'])
    {
        document.getElementById('videoResolutionLabel').innerHTML = translations[lang]['video']['video_resolution_label'];
    }
    else
    {
        document.getElementById('videoResolutionLabel').innerHTML = translations['en']['video']['video_resolution_label'];
    }
    if (translations[lang]['video']['video_bitrate_label'])
    {
        document.getElementById('videoByteLabel').innerHTML = translations[lang]['video']['video_bitrate_label'];
    }
    else
    {
        document.getElementById('videoByteLabel').innerHTML = translations['en']['video']['video_bitrate_label'];
    }
    if (translations[lang]['video']['video_fps_label'])
    {
        document.getElementById('videoFpsLabel').innerHTML = translations[lang]['video']['video_fps_label'];
    }
    else
    {
        document.getElementById('videoFpsLabel').innerHTML = translations['en']['video']['video_fps_label'];
    }
    if (translations[lang]['video']['video_present_label'])
    {
        document.getElementById('videoPresentLabel').innerHTML = translations[lang]['video']['video_present_label'];
    }
    else
    {
        document.getElementById('videoPresentLabel').innerHTML = translations['en']['video']['video_present_label'];
    }
    if (translations[lang]['video']['video_decoder_label'])
    {
        document.getElementById('videoDecoderLabel').innerHTML = translations[lang]['video']['video_decoder_label'];
    }
    else
    {
        document.getElementById('videoDecoderLabel').innerHTML = translations['en']['video']['video_decoder_label'];
    }
    // video end
    // audio
    if (translations[lang]['audio']['audio_decoder_label'])
    {
        document.getElementById('audioDecoderLabel').innerHTML = translations[lang]['audio']['audio_decoder_label'];
    }
    else
    {
        document.getElementById('audioDecoderLabel').innerHTML = translations['en']['audio']['audio_decoder_label'];
    }
    // audio end
    // special
    if (translations[lang]['special']['hide_message_label'])
    {
        document.getElementById('hideMessageLabel').innerHTML = translations[lang]['special']['hide_message_label'];
    }
    else
    {
        document.getElementById('hideMessageLabel').innerHTML = translations['en']['special']['hide_message_label'];
    }
    if (translations[lang]['special']['force_overwrite_label'])
    {
        document.getElementById("forceOverwriteLabel").innerHTML = translations[lang]['special']['force_overwrite_label'];
    }
    else
    {
        document.getElementById("forceOverwriteLabel").innerHTML = translations['en']['special']['force_overwrite_label'];
    }
    if (translations[lang]['special']['show_encoding_status_label'])
    {
        document.getElementById('showEncodingStatusLabel').innerHTML = translations[lang]['special']['show_encoding_status_label'];
    }
    else
    {
        document.getElementById('showEncodingStatusLabel').innerHTML = translations['en']['special']['show_encoding_status_label'];
    }
    if (translations[lang]['special']['no_video_out_label'])
    {
        document.getElementById('noVideoOutLabel').innerHTML = translations[lang]['special']['no_video_out_label'];
    }
    else
    {
        document.getElementById('noVideoOutLabel').innerHTML = translations['en']['special']['no_video_out_label'];
    }
    if (translations[lang]['special']['no_audio_out_label'])
    {
        document.getElementById('noAudioOutLabel').innerHTML = translations[lang]['special']['no_audio_out_label'];
    }
    else
    {
        document.getElementById('noAudioOutLabel').innerHTML = translations['en']['special']['no_audio_out_label'];
    }
    if (translations[lang]['special']['output_command_label'])
    {
        document.getElementById('outputCommandLabel').innerHTML = translations[lang]['special']['output_command_label'];
    }
    else
    {
        document.getElementById('outputCommandLabel').innerHTML = translations['en']['special']['output_command_label'];
    }
    // special end
    // button
    if (translations[lang]['button']['start_websocket_button'])
    {
        document.getElementById('startWSBtn').innerHTML = translations[lang]['button']['start_websocket_button'];
    }
    else
    {
        document.getElementById('startWSBtn').innerHTML = translations['en']['button']['start_websocket_button'];
    }
    if (translations[lang]['button']['dis_01_button'])
    {
        document.getElementById('dis01').innerHTML = translations[lang]['button']['dis_01_button'];
    }
    else
    {
        document.getElementById('dis01').innerHTML = translations['en']['button']['dis_01_button'];
    }
    if (translations[lang]['button']['dis_02_button'])
    {
        document.getElementById('dis02').innerHTML = translations[lang]['button']['dis_02_button'];
    }
    else
    {
        document.getElementById('dis02').innerHTML = translations['en']['button']['dis_02_button'];
    }
    if (translations[lang]['button']['video_present_unselect'])
    {
        document.getElementById('videoPresentUnselect').innerHTML = translations[lang]['button']['video_present_unselect'];
    }
    else
    {
        document.getElementById('videoPresentUnselect').innerHTML = translations['en']['button']['video_present_unselect'];
    }
    if (translations[lang]['button']['video_decoder_unselect'])
    {
        document.getElementById('videoDecoderUnselect').innerHTML = translations[lang]['button']['video_decoder_unselect'];
    }
    else
    {
        document.getElementById('videoDecoderUnselect').innerHTML = translations['en']['button']['video_decoder_unselect'];
    }
    if (translations[lang]['button']['audio_decoder_unselect'])
    {
        document.getElementById('audioDecoderUnselect').innerHTML = translations[lang]['button']['audio_decoder_unselect'];
    }
    else
    {
        document.getElementById('audioDecoderUnselect').innerHTML = translations['en']['button']['audio_decoder_unselect'];
    }
    if (translations[lang]['button']['chose_to_hide_message_label'])
    {
        document.getElementById('choseToHideMessageLabel').innerHTML = translations[lang]['button']['chose_to_hide_message_label'];
    }
    else
    {
        document.getElementById('choseToHideMessageLabel').innerHTML = translations['en']['button']['chose_to_hide_message_label'];
    }
    if (translations[lang]['button']['chose_to_overwrite_label'])
    {
        document.getElementById("choseToOverwriteLabel").innerHTML = translations[lang]['button']['chose_to_overwrite_label'];
    }
    else
    {
        document.getElementById("choseToOverwriteLabel").innerHTML = translations['en']['button']['chose_to_overwrite_label'];
    }
    if (translations[lang]['button']['chose_to_show_encoding_status_label'])
    {
        document.getElementById('choseToShowEncodingStatusLabel').innerHTML = translations[lang]['button']['chose_to_show_encoding_status_label'];
    }
    else
    {
        document.getElementById('choseToShowEncodingStatusLabel').innerHTML = translations['en']['button']['chose_to_show_encoding_status_label'];
    }
    if (translations[lang]['button']['chose_to_no_video_out'])
    {
        document.getElementById('choseToNoVideoOut').innerHTML = translations[lang]['button']['chose_to_no_video_out'];
    }
    else
    {
        document.getElementById('choseToNoVideoOut').innerHTML = translations['en']['button']['chose_to_no_video_out'];
    }
    if (translations[lang]['button']['chose_to_no_audio_out'])
    {
        document.getElementById('choseToNoAudioOut').innerHTML = translations[lang]['button']['chose_to_no_audio_out'];
    }
    else
    {
        document.getElementById('choseToNoAudioOut').innerHTML = translations['en']['button']['chose_to_no_audio_out'];
    }
    if (translations[lang]['button']['show_support_codec_button'])
    {
        document.getElementById('showSupportedCodecBtn').innerHTML = translations[lang]['button']['show_support_codec_button'];
    }
    else
    {
        document.getElementById('showSupportedCodecBtn').innerHTML = translations['en']['button']['show_support_codec_button'];
    }
    if (translations[lang]['button']['generate_button'])
    {
        document.getElementById("generateBtn").innerHTML = translations[lang]['button']['generate_button'];
    }
    else
    {
        document.getElementById("generateBtn").innerHTML = translations['en']['button']['generate_button'];
    }
    if (translations[lang]['button']['copy_button'])
    {
        document.getElementById("copyBtn").innerHTML = translations[lang]['button']['copy_button'];
    }
    else
    {
        document.getElementById("copyBtn").innerHTML = translations['en']['button']['copy_button'];
    }
    if (translations[lang]['button']['run_button'])
    {
        document.getElementById("runBtn").innerHTML = translations[lang]['button']['run_button'];
    }
    else
    {
        document.getElementById("runBtn").innerHTML = translations['en']['button']['run_button'];
    }
    // button end
    // }
}

// 在启动时读取用户的语言设置
function translations_load()
{
    var user_lang = navigator.language || navigator.userLanguage;
    langsel(user_lang);
    try
    {
        if (!translations[user_lang])
        {
            user_lang = 'en';
        }
    }
    catch
    {
        user_lang = 'en';
    }
    var select = document.getElementById('lang');
    select.value = user_lang;
}