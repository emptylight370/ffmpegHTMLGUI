// define translations, based on the sequences in the document, `json` format
var translations = {
    "en": {
        "language_select": "Language select",
        "general": {
            "language_choose": "Language:",
            "upload_label": "You can click to upload and select a file, and copy the file address. This does not actually work here:",
            "file_path_label": "Here is the path of the file you selected. Right-click the file when uploading and select Copy file address, and paste the address into the right text box:",
            "preset_label": "no need to fill in the settings, one-click export",
            "output_dir_label": "Output video folder:",
            "output_filename_label": "Output video name:",
        },
        "title": {
            "websocket_label": "websocket settings",
            "preset_title": "Preset options",
            "ffmpeg_settings_title": "Here are the FFmpeg settings:",
            "general_settings_title": "General settings",
            "video_settings_title": "Video settings",
            "audio_settings_title": "Audio settings",
            "special_settings_label": "Special options",
            "output_command_title": "Output command",
        },
        "tip": {},
        "video": {
            "video_resolution_label": "Video resolution:",
            "video_bitrate_label": "Video bitrate:",
            "video_fps_label": "Video FPS:",
        },
        "audio": {},
        "special": {
            "force_overwrite_label": "Force overwrite output file",
            "show_encoding_status_label": "Show encoding progress",
            "no_video_out_label": "No video output:",
            "no_audio_out_label": "No audio output:",
            "output_command_label": "The generated parameter command is as follows:",
        },
        "button": {
            "start_websocket_button": "Start websocket",
            "dis_01_button": "[Expand]",
            "dis_02_button": "[Collapse]", "chose_to_overwrite_label": "Click to enable",
            "chose_to_show_encoding_status_label": "Click to enable",
            "chose_to_no_video_out": "Click to enable",
            "chose_to_no_audio_out": "Click to enable",
            "generate_button": "Click to generate",
            "copy_button": "Click to copy",
            "run_button": "Click to run",
        },
    },
    "zh-CN": {
        "language_select": "语言选择",
        "general": {
            "language_choose": "语言选择：",
            "upload_label": "你可以点击上传选择文件，并复制文件地址，这里实际上不起作用：",
            "file_path_label": "这里是你选择的文件的路径，请在上传文件时右键文件选择复制文件地址，并将地址粘贴到右边文本框中：",
            "preset_label": "无需填写设置，一键导出",
            "output_dir_label": "输出视频文件夹：",
            "output_filename_label": "输出视频名称：",
        },
        "title": {
            "websocket_label": "websocket设置",
            "preset_title": "预设选项",
            "ffmpeg_settings_title": "以下是FFmpeg的参数设置：",
            "general_settings_title": "一般设置",
            "video_settings_title": "视频设置",
            "audio_settings_title": "音频设置",
            "special_settings_label": "特殊选项",
            "output_command_title": "输出命令",
        },
        "tip": {},
        "video": {
            "video_resolution_label": "视频分辨率：",
            "video_bitrate_label": "视频比特率：",
            "video_fps_label": "视频帧数：",
        },
        "audio": {},
        "special": {
            "force_overwrite_label": "强制覆盖输出文件",
            "show_encoding_status_label": "显示编码进度",
            "no_video_out_label": "不输出视频：",
            "no_audio_out_label": "不输出音频：",
            "output_command_label": "生成的参数命令如下：",
        },
        "button": {
            "start_websocket_button": "启动websocket",
            "dis_01_button": "[展开]",
            "dis_02_button": "[收起]",
            "chose_to_overwrite_label": "点击启用",
            "chose_to_show_encoding_status_label": "点击启用",
            "chose_to_no_video_out": "点击启用",
            "chose_to_no_audio_out": "点击启用",
            "generate_button": "点击生成",
            "copy_button": "点击复制",
            "run_button": "点击运行",
        },
    },
    "zh-TW":
    {
        "language_select": "語言選擇",
        "general": {
            "language_choose": "語言選擇：",
            "upload_label": "你可以點擊上傳選擇文件，並複製文件地址，這裏實際上不起作用：",
            "file_path_label": "這裏是你選擇的文件的路徑，請在上傳時右鍵文件選擇複製文件地址，並將地址粘貼到右邊文本框中：",
            "preset_label": "無需填寫設置，一鍵導出",
            "output_dir_label": "輸出視頻文件夾：",
            "output_filename_label": "輸出視頻名稱：",
        },
        "title": {
            "websocket_label": "websocket設置",
            "preset_title": "預設選項",
            "ffmpeg_settings_title": "以下是FFmpeg的參數設置：",
            "general_settings_title": "一般設置",
            "video_settings_title": "視頻設置",
            "audio_settings_title": "音頻設置",
            "special_settings_label": "特殊選項",
            "output_command_title": "輸出命令",
        },
        "tip": {},
        "video": {
            "video_resolution_label": "視頻分辨率：",
            "video_bitrate_label": "視頻比特率：",
            "video_fps_label": "視頻幀數：",
        },
        "audio": {},
        "special": {
            "force_overwrite_label": "强制覆蓋輸出文件",
            "show_encoding_status_label": "顯示編碼進度",
            "no_video_out_label": "不輸出視頻：",
            "no_audio_out_label": "不輸出音頻：",
            "output_command_label": "生成的參數命令如下：",
        },
        "button": {
            "start_websocket_button": "啓動websocket",
            "dis_01_button": "[展開]",
            "dis_02_button": "[收起]",
            "chose_to_overwrite_label": "點擊啓用",
            "chose_to_show_encoding_status_label": "點擊啓用",
            "chose_to_no_video_out": "點擊啓用",
            "chose_to_no_audio_out": "點擊啓用",
            "generate_button": "點擊生成",
            "copy_button": "點擊複製",
            "run_button": "點擊運行",
        },
    },
    "jp":
    {
        "language_select": "言語選択",
        "general": {
            "language_choose": "言語選択：",
            "upload_label": "ファイルを選択して、ファイルのアドレスをコピーして、ここでは実際には機能しません：",
            "file_path_label": "ここはあなたが選んだファイルのパスです。アップロード時にファイルを右クリックして、ファイルアドレスをコピーし、アドレスを右側のテキストボックスに貼り付けてください：",
            "preset_label": "設定を記入する必要はありません。ワンクリックでエクスポートします",
            "output_dir_label": "出力ビデオフォルダ：",
            "output_filename_label": "出力ビデオ名：",
        },
        "title": {
            "websocket_label": "websocket設定",
            "preset_title": "プリセットオプション",
            "ffmpeg_settings_title": "以下はFFmpegのパラメータ設定です：",
            "general_settings_title": "一般設定",
            "video_settings_title": "ビデオ設定",
            "audio_settings_title": "オーディオ設定",
            "special_settings_label": "特別なオプション",
            "output_command_title": "出力コマンド",
        },
        "tip": {},
        "video": {
            "video_resolution_label": "ビデオ解像度：",
            "video_bitrate_label": "ビデオビットレート：",
            "video_fps_label": "ビデオフレームレート：",
        },
        "audio": {},
        "special": {
            "force_overwrite_label": "強制的に出力ファイルを上書きする",
            "show_encoding_status_label": "エンコード状態を表示する",
            "no_video_out_label": "ビデオを出力しない：",
            "no_audio_out_label": "オーディオを出力しない：",
            "output_command_label": "生成されたパラメータコマンドは次のとおりです：",
        },
        "button": {
            "start_websocket_button": "websocketを起動する",
            "dis_01_button": "[展開]",
            "dis_02_button": "[収縮]",
            "chose_to_overwrite_label": "クリックして有効にする",
            "chose_to_show_encoding_status_label": "クリックして有効にする",
            "chose_to_no_video_out": "クリックして有効にする",
            "chose_to_no_audio_out": "クリックして有効にする",
            "generate_button": "クリックして生成する",
            "copy_button": "クリックしてコピーする",
            "run_button": "クリックして実行する",
        },
    }
}

// 语言选择
function langsel(lang = null)
{
    // console.log(lang);
    if (!lang)
    {
        // get language chosen
        var lang = document.getElementById("lang").value;
    }
    // console.log(lang);
    // set document language
    document.documentElement.lang = lang;
    console.log(translations[lang]['language_select'] + ":" + lang);

    // set translations
    // if (translations)
    // {
    try
    {
        document.getElementById("languageChoose").innerHTML = translations[lang]['general']['language_choose'];
    }
    catch
    {
        document.getElementById("languageChoose").innerHTML = translations['en']['general']['language_choose'];
    }
    try
    {
        document.getElementById('uploadLabel').innerHTML = translations[lang]['general']['upload_label'];
    }
    catch {
        document.getElementById('uploadLabel').innerHTML = translations['en']['general']['upload_label'];
    }
    try
    {
        document.getElementById('fileSrcLabel').innerHTML = translations[lang]['general']['file_path_label'];
    }
    catch
    {
        document.getElementById('fileSrcLabel').innerHTML = translations['en']['general']['file_path_label'];
    }
    try
    {
        document.getElementById("websocketLabel").innerHTML = translations[lang]['title']['websocket_label'];
    }
    catch
    {
        document.getElementById("websocketLabel").innerHTML = translations['en']['title']['websocket_label'];
    }
    try
    {
        document.getElementById('startWSBtn').innerHTML = translations[lang]['button']['start_websocket_button'];
    }
    catch
    {
        document.getElementById('startWSBtn').innerHTML = translations['en']['button']['start_websocket_button'];
    }
    try
    {
        document.getElementById('presetTitle').innerHTML = translations[lang]['title']['preset_title'];
    }
    catch
    {
        document.getElementById('presetTitle').innerHTML = translations['en']['title']['preset_title'];
    }
    try
    {
        document.getElementById('presetLabel').innerHTML = translations[lang]['general']['preset_label'];
    }
    catch
    {
        document.getElementById('presetLabel').innerHTML = translations['en']['general']['preset_label'];
    }
    try
    {
        document.getElementById('dis01').innerHTML = translations[lang]['button']['dis_01_button'];
    }
    catch
    {
        document.getElementById('dis01').innerHTML = translations['en']['button']['dis_01_button'];
    }
    try
    {
        document.getElementById('dis02').innerHTML = translations[lang]['button']['dis_02_button'];
    }
    catch
    {
        document.getElementById('dis02').innerHTML = translations['en']['button']['dis_02_button'];
    }
    try
    {
        document.getElementById('ffmpegSettingsTitle').innerHTML = translations[lang]['title']['ffmpeg_settings_title'];
    }
    catch
    {
        document.getElementById('ffmpegSettingsTitle').innerHTML = translations['en']['title']['ffmpeg_settings_title'];
    }
    try
    {
        document.getElementById('generalSettingsTitle').innerHTML = translations[lang]['title']['general_settings_title'];
    }
    catch
    {
        document.getElementById('generalSettingsTitle').innerHTML = translations['en']['title']['general_settings_title'];
    }
    try
    {
        document.getElementById('outputDirLabel').innerHTML = translations[lang]['general']['output_dir_label'];
    }
    catch
    {
        document.getElementById('outputDirLabel').innerHTML = translations['en']['general']['output_dir_label'];
    }
    try
    {
        document.getElementById('outputFileNameLabel').innerHTML = translations[lang]['general']['output_filename_label'];
    }
    catch
    {
        document.getElementById('outputFileNameLabel').innerHTML = translations['en']['general']['output_filename_label'];
    }
    try
    {
        document.getElementById('videoSettingsTitle').innerHTML = translations[lang]['title']['video_settings_title'];
    }
    catch
    {
        document.getElementById('videoSettingsTitle').innerHTML = translations['en']['title']['video_settings_title'];
    }
    try
    {
        document.getElementById('videoResolutionLabel').innerHTML = translations[lang]['video']['video_resolution_label'];
    }
    catch
    {
        document.getElementById('videoResolutionLabel').innerHTML = translations['en']['video']['video_resolution_label'];
    }
    try
    {
        document.getElementById('videoByteLabel').innerHTML = translations[lang]['video']['video_bitrate_label'];
    }
    catch
    {
        document.getElementById('videoByteLabel').innerHTML = translations['en']['video']['video_bitrate_label'];
    }
    try
    {
        document.getElementById('videoFpsLabel').innerHTML = translations[lang]['video']['video_fps_label'];
    }
    catch
    {
        document.getElementById('videoFpsLabel').innerHTML = translations['en']['video']['video_fps_label'];
    }
    try
    {
        document.getElementById('audioSettingsTitle').innerHTML = translations[lang]['title']['audio_settings_title'];
    }
    catch
    {
        document.getElementById('audioSettingsTitle').innerHTML = translations['en']['title']['audio_settings_title'];
    }
    try
    {
        document.getElementById('specialSettingsLabel').innerHTML = translations[lang]['title']['special_settings_label'];
    }
    catch
    {
        document.getElementById('specialSettingsLabel').innerHTML = translations['en']['title']['special_settings_label'];
    }
    try
    {
        document.getElementById("forceOverwriteLabel").innerHTML = translations[lang]['special']['force_overwrite_label'];
    }
    catch
    {
        document.getElementById("forceOverwriteLabel").innerHTML = translations['en']['special']['force_overwrite_label'];
    }
    try
    {
        document.getElementById("choseToOverwriteLabel").innerHTML = translations[lang]['button']['chose_to_overwrite_label'];
    }
    catch
    {
        document.getElementById("choseToOverwriteLabel").innerHTML = translations['en']['button']['chose_to_overwrite_label'];
    }
    try
    {
        document.getElementById('showEncodingStatus').innerHTML = translations[lang]['special']['show_encoding_status_label'];
    }
    catch
    {
        document.getElementById('showEncodingStatus').innerHTML = translations['en']['special']['show_encoding_status_label'];
    }
    try
    {
        document.getElementById('choseToShowEncodingStatusLabel').innerHTML = translations[lang]['button']['chose_to_show_encoding_status_label'];
    }
    catch
    {
        document.getElementById('choseToShowEncodingStatusLabel').innerHTML = translations['en']['button']['chose_to_show_encoding_status_label'];
    }
    try
    {
        document.getElementById('noVideoOut').innerHTML = translations[lang]['special']['no_video_out_label'];
    }
    catch
    {
        document.getElementById('noVideoOut').innerHTML = translations['en']['special']['no_video_out_label'];
    }
    try
    {
        document.getElementById('choseToNoVideoOut').innerHTML = translations[lang]['button']['chose_to_no_video_out'];
    }
    catch
    {
        document.getElementById('choseToNoVideoOut').innerHTML = translations['en']['button']['chose_to_no_video_out'];
    }
    try
    {
        document.getElementById('noAudioOut').innerHTML = translations[lang]['special']['no_audio_out_label'];
    }
    catch
    {
        document.getElementById('noAudioOut').innerHTML = translations['en']['special']['no_audio_out_label'];
    }
    try
    {
        document.getElementById('choseToNoAudioOut').innerHTML = translations[lang]['button']['chose_to_no_audio_out'];
    }
    catch
    {
        document.getElementById('choseToNoAudioOut').innerHTML = translations['en']['button']['chose_to_no_audio_out'];
    }
    try
    {
        document.getElementById('outputCommandTitle').innerHTML = translations[lang]['title']['output_command_title'];
    }
    catch
    {
        document.getElementById('outputCommandTitle').innerHTML = translations['en']['title']['output_command_title'];
    }
    try
    {
        document.getElementById('outputCommandLabel').innerHTML = translations[lang]['special']['output_command_label'];
    }
    catch
    {
        document.getElementById('outputCommandLabel').innerHTML = translations['en']['special']['output_command_label'];
    }
    try
    {
        document.getElementById("generateBtn").innerHTML = translations[lang]['button']['generate_button'];
    }
    catch
    {
        document.getElementById("generateBtn").innerHTML = translations['en']['button']['generate_button'];
    }
    try
    {
        document.getElementById("copyBtn").innerHTML = translations[lang]['button']['copy_button'];
    }
    catch
    {
        document.getElementById("copyBtn").innerHTML = translations['en']['button']['copy_button'];
    }
    try
    {
        document.getElementById("runBtn").innerHTML = translations[lang]['button']['run_button'];
    }
    catch
    {
        document.getElementById("runBtn").innerHTML = translations['en']['button']['run_button'];
    }
    // }
}

// 在启动时读取用户的语言设置
function translations_load()
{
    var user_lang = navigator.language || navigator.userLanguage;
    langsel(user_lang);
    var select = document.getElementById('lang');
    select.value = user_lang;
}